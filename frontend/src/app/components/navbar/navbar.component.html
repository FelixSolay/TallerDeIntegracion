<header *ngIf="validRoute && type == ''">
    <a routerLink="/"><img src="images/Logo.png" class="logo"></a>
</header>

<!--Cliente-->
<header *ngIf="validRoute && (type == 'cliente')">
    <a routerLink="/productos"><img src="images/Logo.png" class="logo"></a>

    <ul>
        <li class="categories-menu-container" (click)="toggleCategoriesMenu()">
            <a>
                <span class="menu-icon">‚ò∞</span>
                <span class="nav-label">Categor√≠as</span>
            </a>
        </li>
        <li class="categories-dropdown-wrapper" *ngIf="showCategoriesMenu">
            <div class="categories-dropdown" (click)="$event.stopPropagation()">
                    <div class="categories-left">
                    <div *ngFor="let cat0 of categorias" 
                         class="category-principal"
                         [class.active]="cat0.hover"
                         (mouseenter)="setActiveCategory(cat0)">
                        <img *ngIf="cat0.imagen" [src]="cat0.imagen" class="cat-img" alt="{{cat0.nombre}}">
                        <span *ngIf="!cat0.imagen && cat0.icono" class="cat-icon">{{cat0.icono}}</span>
                        <span *ngIf="!cat0.imagen && !cat0.icono" class="cat-icon">üìÅ</span>
                        <span class="cat-name">{{cat0.nombre}}</span>
                        <span class="arrow">‚Ä∫</span>
                    </div>
                    </div>
                    
                    <div class="categories-right">
                        <div *ngFor="let cat0 of categorias" class="subcategories-panel" [class.show]="cat0.hover">
                            <div class="subcategories-columns">
                                <div *ngFor="let cat1 of cat0.subcategorias" class="subcategory-group">
                                    <div class="subcategory-title" (click)="navegarAProductos(cat1._id)">
                                        {{cat1.nombre}}
                                    </div>
                                    <ul *ngIf="cat1.subcategorias && cat1.subcategorias.length > 0">
                                        <li *ngFor="let cat2 of cat1.subcategorias" (click)="navegarAProductos(cat2._id)">
                                            {{cat2.nombre}}
                                        </li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
            </div>
        </li>
    <li class="nav-divider" *ngIf="!isMobile">|</li>
        <li [class.active]="isActive('productos')">
            <a routerLink="/productos">
                <span class="nav-label">Productos</span>
                <img *ngIf="isMobile && color == 'azul'" src="images/home azul.png">
                <img *ngIf="isMobile && color == 'blanco'" src="images/home blanco.png">
            </a>
        </li>
    <li class="nav-divider" *ngIf="!isMobile">|</li>
        <li [class.active]="isActive('promociones')">
            <a routerLink="/promociones">
                <span class="nav-label">Promociones</span>
                <img *ngIf="isMobile && color == 'azul'" src="images/expensas azul.png">
                <img *ngIf="isMobile && color == 'blanco'" src="images/expensas blanco.png">
            </a>
        </li>
    <li class="nav-divider" *ngIf="!isMobile">|</li>
        <li [class.active]="isActive('favoritos')">
            <a routerLink="/favoritos">
                <span class="nav-label">Favoritos</span>
                <img *ngIf="isMobile && color == 'azul'" src="images/pagar azul.png">
                <img *ngIf="isMobile && color == 'blanco'" src="images/pagar blanco.png">
            </a>
        </li>
    </ul>
    <div class="user-menu-container">
        <!-- Bot√≥n de carrito a la izquierda del nombre (solo clientes) -->
        <a *ngIf="type === 'cliente'" routerLink="/carrito" class="navbar-cart-button" title="Ir al carrito">
            <span class="cart-icon">üõí</span>
            <span class="cart-badge" *ngIf="cartTotal > 0">{{ formatPrice(cartTotal) }}</span>
        </a>
        <div class="user" (click)="toggleUserMenu()">
            <p *ngIf="!isMobile">{{name}}</p>
            <span class="dropdown-arrow">‚ñº</span>
        </div>
        <div class="user-dropdown" *ngIf="showUserMenu">
            <ng-container *ngIf="type === 'cliente'">
                <div class="dropdown-item" (click)="goToPedidosEnCurso()">
                    <span>Pedidos en curso</span>
                </div>
                <div class="dropdown-item" (click)="goToHistorialPedidos()">
                    <span>Historial de pedidos</span>
                </div>
            </ng-container>
            <div class="dropdown-item" (click)="goToProfile()">
                <span>Modificar perfil</span>
            </div>
            <div class="dropdown-item logout" (click)="logout()">
                <span>Cerrar sesi√≥n</span>
            </div>
        </div>
    </div>
</header>

<!--Administradores-->
<header *ngIf="validRoute && type == 'Administrador'">
    <a routerLink="/inicioAdministrador"><img src="images/Logo.png" class="logo"></a>
    <ul>
        <li [class.active]="isActive('admin/categorias')">
            <a routerLink="/admin/categorias">
                <span class="nav-label">Categor√≠as</span>
                <img *ngIf="isMobile && color == 'azul'" src="images/home azul.png">
                <img *ngIf="isMobile && color == 'blanco'" src="images/home blanco.png">
            </a>
        </li>
    <li class="nav-divider" *ngIf="!isMobile">|</li>
        <li [class.active]="isActive('admin/productosAdministrador')" >
            <a routerLink="/admin/productosAdministrador">
                <span class="nav-label">Productos</span>
                <img *ngIf="isMobile && color == 'azul'" src="images/expensas azul.png">
                <img *ngIf="isMobile && color == 'blanco'" src="images/expensas blanco.png">
            </a>
        </li>
    <li class="nav-divider" *ngIf="!isMobile">|</li>
        <li [class.active]="isActive('promocionesAdministrador')">
            <a routerLink="/promocionesAdministrador">
                <span class="nav-label">Promociones</span>
                <img *ngIf="isMobile && color == 'azul'" src="images/contactos azul.png">
                <img *ngIf="isMobile && color == 'blanco'" src="images/contactos blanco.png">
            </a>
        </li>
    <li class="nav-divider" *ngIf="!isMobile">|</li>
        <li [class.active]="isActive('ventasAdministrador')">
            <a routerLink="/ventasAdministrador">
                <span class="nav-label">Ventas</span>
                <img *ngIf="isMobile && color == 'azul'" src="images/pagar azul.png">
                <img *ngIf="isMobile && color == 'blanco'" src="images/pagar blanco.png">
            </a>
        </li>
    </ul>
    <div class="user-menu-container">
        <div class="user" (click)="toggleUserMenu()">
            <p *ngIf="!isMobile">{{name}}</p>
            <span class="dropdown-arrow">‚ñº</span>
        </div>
        <div class="user-dropdown" *ngIf="showUserMenu">
            <div class="dropdown-item" (click)="goToProfile()">
                <span>Modificar perfil</span>
            </div>
            <div class="dropdown-item logout" (click)="logout()">
                <span>Cerrar sesi√≥n</span>
            </div>
        </div>
    </div>
</header>
